/*!!!!  MAX inactivity time  !!!!!!!!!!!!!*/
var idleTimeout=20*60;
/*!!!!  Interval for postbacks  !!!!!!!!!!*/
var keepAliveTick=50;
/*!!!!  Interval for timeout checks !!!!!!*/
var idleTick=1;
/*!!!!  KeepAlive handler path  !!!!!!!!!!*/ 
var keepAliveURL="/WebHandlers/SessionKeepAlive.ashx";
/*!!!!  Redirect after Logout  !!!!!!!!!!!*/
var redirectURL = "http://localhost/Login.aspx"; $(function () { if ($("iframe#sessionKeepAlive").length > 0) return; var f = true, b = true, e, g, a; function k(e) { for (var c, d, b = document.cookie.split(";"), a = 0; a < b.length; a++) { c = b[a].substr(0, b[a].indexOf("=")); d = b[a].substr(b[a].indexOf("=") + 1); c = c.replace(/^\s+|\s+$/g, ""); if (c == e) return unescape(d) } } function l(b, c) { var a = escape(c); document.cookie = b + "=" + a + ";path=/" } function d() { if (b) { a = (new Date).getTime(); l("lastActivity", a) } } d(); function i() { var a = parseInt(k("lastActivity"), 10); return isNaN(a) ? (new Date).getTime() : a } function c() { b = false; clearInterval(g); clearInterval(e) } function j(a) { if (a == undefined || a == null) a = "Your application was found idle and was signed out automatically to prevent unauthorized access.<br/><br/>Please login again to continue."; $(document.createElement("div")).css("padding", "15px 15px 25px").html(a).dialog({ title: "Account Signed Out!", modal: true, resizable: false, width: 500, buttons: { Ok: function () { $(this).dialog("close") } }, close: function () { window.location = redirectURL } }).show() } function h(a) { c(); if (f) { f = false; if ($.ui && $.ui.dialog) j(a); else window.location = redirectURL } } e = setInterval(function () { var d = (new Date).getTime(); d - a < idleTimeout * 1e3 && b && $.ajax({ url: keepAliveURL, success: function (a) { if (a != "success") { var b = null; if (a.indexOf("SignedOutForcefully") > -1) b = "Someone has signed-in using your credentials on another machine/browser. You can be a victom of account theft. If you did not sign-in at some other place, please contact the system administrator."; h(b) } }, error: function () { c() } }) }, keepAliveTick * 1e3); g = setInterval(function () { var d = (new Date).getTime(); if (d - a > idleTimeout * 1e3) { a = i(); if (d - a > idleTimeout * 1e3) if (b) { c(); $.ajax({ url: keepAliveURL, complete: function () { h() }, data: { action: "signout" }, async: false }) } } }, idleTick * 1e3); $("body").mousedown(d).keydown(d) });